<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="card">
    <h2>Admin Profile</h2>
    <p><b>Name:</b> {{ user.name }}</p>
    <p><b>Role:</b> Recruitment Admin</p>

    <a href="/auth/logout">Logout</a>
</div>



<div class="card" style="margin-top:20px;">
    <h2>Create & Publish Job</h2>

    <!-- Job input fields -->
    <input id="title" placeholder="Job Title">
    <input id="department" placeholder="Department">
    <input id="location" placeholder="Location">
    <input id="vacancies" placeholder="Vacancies">

    <!-- Clicking this publishes the job -->
    <button onclick="createJob()">Publish Job</button>

    <!-- Status message -->
    <p id="msg"></p>
</div>

<script src="/static/js/app.js"></script>

<script>
/*
createJob()
-----------
Called when admin clicks "Publish Job"

Flow:
1. Collect form data
2. Send POST request to backend
3. Backend saves job in DB
4. Show success/error message
*/
async function createJob() {

    // Collect job details from form
    const data = {
        title: document.getElementById("title").value,
        department: document.getElementById("department").value,
        location: document.getElementById("location").value,
        vacancies: parseInt(document.getElementById("vacancies").value),

        // created_by comes from session (logged-in admin)
        created_by: {{ user.user_id }}
    };

    // Send data to backend route
    const res = await postData("/admin/create-job", data);

    // Show response to admin
    document.getElementById("msg").innerText =
        res.message || res.error;
}
</script>



</body>
</html>
